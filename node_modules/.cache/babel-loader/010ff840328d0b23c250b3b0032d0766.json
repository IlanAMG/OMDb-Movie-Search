{"ast":null,"code":"import './config';\nimport 'firebase/firestore';\nimport * as firebase from 'firebase';\nimport { getCurrentUser } from './Auth';\nconst collections = {\n  favorites: \"favorites\"\n};\nconst db = firebase.firestore(); //write & remove\n\nexport const write = item => {\n  item.isFavorite = true;\n  const doc = {\n    user: getCurrentUser(),\n    item: item\n  };\n  db.collection(collections.favorites).doc(doc.email).set(doc).then(() => {\n    console.log(\"Document successfully written!\");\n  }).catch(error => {\n    console.error(\"Error writing document: \", error);\n  });\n};\nexport const remove = item => {\n  db.collection(collections.favorites).doc(item.imdb).delete().then(() => {\n    console.log(\"Le doc a été retiré avec succès\");\n  }).catch(error => {\n    console.error(\"Erreur à la suppression du document\", error);\n  });\n}; //read\n\nexport const read = () => {\n  return new Promise((resolve, reject) => {\n    db.collection(collections.favorites).get().then(querySnapshot => {\n      resolve(querySnapshot);\n    }).catch(err => reject(err));\n  });\n};","map":{"version":3,"sources":["/Users/Ilan/PROGRAMMATION/FORMATION/UDEMY_OMDdAPI_Films/omdb-movie-starter/src/firebase/Database.js"],"names":["firebase","getCurrentUser","collections","favorites","db","firestore","write","item","isFavorite","doc","user","collection","email","set","then","console","log","catch","error","remove","imdb","delete","read","Promise","resolve","reject","get","querySnapshot","err"],"mappings":"AAAA,OAAO,UAAP;AACA,OAAO,oBAAP;AACA,OAAO,KAAKA,QAAZ,MAA0B,UAA1B;AACA,SAASC,cAAT,QAA+B,QAA/B;AAEA,MAAMC,WAAW,GAAG;AAChBC,EAAAA,SAAS,EAAE;AADK,CAApB;AAIA,MAAMC,EAAE,GAAGJ,QAAQ,CAACK,SAAT,EAAX,C,CAEA;;AAEA,OAAO,MAAMC,KAAK,GAAGC,IAAI,IAAI;AACzBA,EAAAA,IAAI,CAACC,UAAL,GAAkB,IAAlB;AACA,QAAMC,GAAG,GAAG;AACRC,IAAAA,IAAI,EAAET,cAAc,EADZ;AAERM,IAAAA,IAAI,EAAEA;AAFE,GAAZ;AAKAH,EAAAA,EAAE,CAACO,UAAH,CAAcT,WAAW,CAACC,SAA1B,EAAqCM,GAArC,CAAyCA,GAAG,CAACG,KAA7C,EAAoDC,GAApD,CAAwDJ,GAAxD,EACKK,IADL,CACU,MAAM;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACC,GAHL,EAIKC,KAJL,CAIWC,KAAK,IAAI;AAChBH,IAAAA,OAAO,CAACG,KAAR,CAAc,0BAAd,EAA0CA,KAA1C;AACC,GANL;AAOH,CAdM;AAgBP,OAAO,MAAMC,MAAM,GAAGZ,IAAI,IAAI;AAC1BH,EAAAA,EAAE,CAACO,UAAH,CAAcT,WAAW,CAACC,SAA1B,EAAqCM,GAArC,CAAyCF,IAAI,CAACa,IAA9C,EAAoDC,MAApD,GACKP,IADL,CACU,MAAM;AACRC,IAAAA,OAAO,CAACC,GAAR,CAAY,iCAAZ;AACH,GAHL,EAIKC,KAJL,CAIWC,KAAK,IAAI;AACZH,IAAAA,OAAO,CAACG,KAAR,CAAc,qCAAd,EAAqDA,KAArD;AACH,GANL;AAOH,CARM,C,CAUP;;AAEA,OAAO,MAAMI,IAAI,GAAG,MAAM;AACtB,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCrB,IAAAA,EAAE,CAACO,UAAH,CAAcT,WAAW,CAACC,SAA1B,EACKuB,GADL,GAEKZ,IAFL,CAEUa,aAAa,IAAI;AACnBH,MAAAA,OAAO,CAACG,aAAD,CAAP;AACH,KAJL,EAKKV,KALL,CAKWW,GAAG,IAAIH,MAAM,CAACG,GAAD,CALxB;AAMH,GAPM,CAAP;AAQH,CATM","sourcesContent":["import './config';\nimport 'firebase/firestore'\nimport * as firebase from 'firebase'\nimport { getCurrentUser } from './Auth';\n\nconst collections = {\n    favorites: \"favorites\"\n}\n\nconst db = firebase.firestore()\n\n//write & remove\n\nexport const write = item => {\n    item.isFavorite = true\n    const doc = {\n        user: getCurrentUser(),\n        item: item\n    }\n\n    db.collection(collections.favorites).doc(doc.email).set(doc)\n        .then(() => {\n        console.log(\"Document successfully written!\");\n        })\n        .catch(error => {\n        console.error(\"Error writing document: \", error);\n        });\n}\n\nexport const remove = item => {\n    db.collection(collections.favorites).doc(item.imdb).delete()\n        .then(() => {\n            console.log(\"Le doc a été retiré avec succès\")\n        })\n        .catch(error => {\n            console.error(\"Erreur à la suppression du document\", error);\n        })\n}\n\n//read\n\nexport const read = () => {\n    return new Promise((resolve, reject) => {\n        db.collection(collections.favorites)\n            .get()\n            .then(querySnapshot => {\n                resolve(querySnapshot)\n            })\n            .catch(err => reject(err))\n    })\n}       "]},"metadata":{},"sourceType":"module"}